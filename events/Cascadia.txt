###########################
# Cascadia Events
###########################

add_namespace = cas

# The Great North Icerail Crisis
country_event = {
	id = cas.1
	title = cas.1.t
	desc = cas.1.d
	picture = GFX_report_event_DEN_resistance

	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = { # Well that is annoying
		name = cas.1.a
		add_popularity = {
    		ideology = conservative_democrat
    		popularity = .10
		}
		add_popularity = {
    		ideology = fascism
    		popularity = .01
		}
		add_popularity = {
    		ideology = democratic
    		popularity = -.05
		}
		add_popularity = {
    		ideology = social_democrat
    		popularity = -.06
		}
		damage_building = {
  			type = infrastructure
  			state = 1020
  			damage = 2
		}

		add_idea = CAS_great_north_icerail_crisis
		remove_idea = CAS_icerails_in_disrepair

		hidden_effect = {
			set_country_flag = great_north_icerail_crisis
		}
	}
}

# Texas invades California
country_event = {
	id = cas.2
	title = cas.2.t
	desc = cas.2.d
	picture = GFX_report_event_soviet_soldiers_tank

	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = { # Then it shall be war
		name = cas.2.a
		ai_chance = { base = 50 }
		add_war_support = 0.4
		add_stability = 0.1
	}

	option = { # California is not worth the cost of war
		name = cas.2.b
		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		release = CAL
	}
}

# Check Cascadia conquered by Texas (Hidden event)
country_event = {
	id = cas.3
	hidden = yes

	trigger = {
		tag = CAS
		has_war_with = TEX
		has_government = democratic
		386 = { is_controlled_by = TEX }
		surrender_progress > 0.9
		GER = {
			OR = {
				is_faction_leader = yes
				has_government = fascism
			}
		}
		has_civil_war = no
		#Don't fire if Cascadia has pushed pretty far into TEX
		NOT = {
			any_state = {
				is_on_continent = north_america
				NOT = { state = 375 }
				NOT = { state = 1035 }
				NOT = { state = 1034 }
				NOT = { state = 388 }
				is_controlled_by = ROOT
			}
		}		

		#Don't fire if any states in France are controlled by a different human player
		NOT = {
			any_country = {
				is_ai = no
				NOT = { tag = TEX }
				NOT = { is_in_faction_with = TEX }
				has_war_with = ROOT
				any_state = {
					is_on_continent = north_america
					NOT = { state = 386 }
					NOT = { state = 1023 }
					NOT = { state = 1025 }
					is_owned_by = ROOT
					is_controlled_by = PREV
				}
			}
		}
		# PLEASE Don't fire if this will end the war (No other ally is a major)
		# FRA = {
			# any_allied_country = {
				# is_major = yes 
				# has_capitulated = no 
				# has_war_with = GER 
			# }
		# }
	}
	mean_time_to_happen = { days = 2 }
	immediate = {
		country_event = tex.9
	}
}

# Cascadian Rail Union
country_event = {
	id = cas.4
	title = cas.4.t
	desc = cas.4.d
	picture = GFX_report_event_generic_train

	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = { # All these libs and their private icerail unions
		name = cas.4.a
		damage_building = {
  			type = infrastructure
  			state = 471
  			damage = 2
		}
		damage_building = {
  			type = infrastructure
  			state = 473
  			damage = 2
		}

		add_idea = CAS_rail_union
		remove_idea = CAS_great_north_icerail_crisis
	}
}

# Chapter Closed on Icerail Crisis
country_event = {
	id = cas.5
	title = cas.5.t
	desc = cas.5.d
	picture = GFX_report_event_FDR_speech

	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = { # A future problem now
		name = cas.5.a
		add_popularity = {
    		ideology = conservative_democrat
    		popularity = -0.03
		}
		add_popularity = {
    		ideology = democratic
    		popularity = 0.02
		}
		add_popularity = {
    		ideology = social_democrat
    		popularity = 0.01
		}

		remove_idea = CAS_rail_union
	}
}

# The Last Word
country_event = {
	id = cas.6
	title = cas.6.t
	desc = cas.6.d
	picture = GFX_report_event_gathering_protest

	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = { # Lets hope this gamble works
		name = cas.6.a
		add_political_power = -50

		RCA = {
			if = {
				limit = {
					FROM = { controls_state = 471 }
				}
				transfer_state = 471
			}
			if = {
				limit = {
					FROM = { controls_state = 473 }
				}
				transfer_state = 473
			}
			create_wargoal = {
				type = annex_everything
				target = CAS
			}
		}

		remove_idea = CAS_rail_union
		add_idea = CAS_cascgate
	}
}

# Euphoria Annexation
country_event = {
	id = cas.7
	title = cas.7.t
	desc = cas.7.d
	picture = GFX_report_event_generic_peaceful_annexation

	fire_only_once = yes
	
	trigger = {
		date > 2025.04.01
		EUP {
			has_government = neutrality
		}
	}
	
	option = {
		name = cas.7.a

		annex_country = {
			target = EUP
			transfer_troops = yes
		}
		1033 = {
			add_core_of = ROOT
		}
	}
}
